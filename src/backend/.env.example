# Enable production mode
PRODUCTION=false
CORS_ORIGINS=http://localhost:3000,https://pyreflect.shlawg.com

#MongoDB Storage
MONGODB_URI=

# Hugging Face Settings
# Create token with WRITE permission at https://huggingface.co/settings/tokens
HF_TOKEN=
HF_REPO_ID=

# Model storage strategy (worker-side)
# - hf: upload model directly to Hugging Face (no local .pth saved)
# - local: save to src/backend/data/models
MODEL_STORAGE=local

# Limits (Production)
MAX_CURVES=5000
MAX_FILM_LAYERS=10
MAX_EPOCHS=50
MAX_BATCH_SIZE=64
MAX_CNN_LAYERS=12
MAX_DROPOUT=0.5
MAX_LATENT_DIM=32
MAX_AE_EPOCHS=100
MAX_MLP_EPOCHS=100


# Redis Queue (RQ) for background jobs
# Local dev: install Redis locally (macOS: brew install redis && redis-server)
# Modal GPU workers: REDIS_URL must be reachable from Modal (NOT localhost).
REDIS_URL=redis://localhost:6379
RQ_JOB_TIMEOUT=24h

# Remote worker behavior
# If true, the backend will attempt to trigger a Modal GPU worker immediately after enqueuing a job.
# (The Modal cron poller still exists as a fallback.)
MODAL_INSTANT_SPAWN=true
MODAL_APP_NAME=pyreflect-worker
MODAL_FUNCTION_NAME=run_rq_worker_burst
MODAL_SPAWN_LOCK_TTL_S=900

# Training job meta update throttling (reduces Redis round-trips on fast GPUs)
RQ_META_FLUSH_INTERVAL_S=1.0
RQ_MAX_LOG_LINES=250

# If true, fail the job if Mongo is configured but unreachable.
REQUIRE_MONGO_SAVE=false

# Start a local RQ worker subprocess inside the API process.
# Set to false if you're using remote workers (e.g. Modal).
START_LOCAL_RQ_WORKER=true
